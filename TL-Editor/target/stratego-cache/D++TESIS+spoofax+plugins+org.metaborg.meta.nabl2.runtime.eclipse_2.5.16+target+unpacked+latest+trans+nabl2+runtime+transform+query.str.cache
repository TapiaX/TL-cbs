Module("nabl2/runtime/transform/query",[Imports([ImportWildcard("signatures/nabl2/shared/common"),ImportWildcard("signatures/nabl2/shared/constraints"),ImportWildcard("nabl2/shared"),ImportWildcard("pp/nabl2/runtime/common"),ImportWildcard("signatures/nabl2/runtime/common"),Import("nabl2/runtime/analysis/constraint-compat"),ImportWildcard("nabl2/runtime/transform")]),Signature([Constructors([])]),Rules([SDefT("nabl2--get-ast-decls",[],[DefaultVarDec("a")],Prim("\"SG_get_ast_decls\"",[Var("a")])),SDefT("nabl2--get-ast-refs",[],[DefaultVarDec("a")],Prim("\"SG_get_ast_refs\"",[Var("a")])),SDefT("nabl2--get-ast-property",[],[DefaultVarDec("a"),DefaultVarDec("key")],Prim("\"SG_get_ast_property\"",[Var("a"),Var("key")])),SDefT("nabl2--get-ast-property-by-name",[],[DefaultVarDec("a"),DefaultVarDec("name")],CallT(SVar("nabl2--get-ast-property"),[],[Var("a"),NoAnnoList(Op("Property",[Var("name")]))])),SDefT("nabl2--get-ast-params",[],[DefaultVarDec("a")],CallT(SVar("nabl2--get-ast-property"),[],[Var("a"),NoAnnoList(Op("Params",[]))])),SDefT("nabl2--get-ast-type",[],[DefaultVarDec("a")],CallT(SVar("nabl2--get-ast-property"),[],[Var("a"),NoAnnoList(Op("Type",[]))]))]),Rules([SDefT("nabl2--get-ref-resolution",[],[DefaultVarDec("a")],Prim("\"SG_get_ref_resolution\"",[Var("a")])),SDefT("nabl2--get-decl-resolution",[],[DefaultVarDec("a")],Prim("\"SG_get_decl_resolution\"",[Var("a")])),SDefT("nabl2--get-decl-property",[],[DefaultVarDec("a"),DefaultVarDec("key")],Prim("\"SG_get_decl_property\"",[Var("a"),Var("key")])),SDefT("nabl2--get-decl-property-by-name",[],[DefaultVarDec("a"),DefaultVarDec("name")],CallT(SVar("nabl2--get-decl-property"),[],[Var("a"),NoAnnoList(Op("Property",[Var("name")]))])),SDefT("nabl2--get-decl-type",[],[DefaultVarDec("a")],CallT(SVar("nabl2--get-decl-property"),[],[Var("a"),NoAnnoList(Op("Type",[]))]))]),Rules([SDefNoArgs("nabl2--get-ast-analysis",Seq(CallNoArgs(SVar("nabl2--get-ast-index")),Seq(Match(NoAnnoList(Op("TermIndex",[RootApp(Id),Wld]))),CallNoArgs(SVar("nabl2--get-resource-analysis"))))),SDefNoArgs("nabl2--analysis-has-errors",Seq(Match(Var("a")),Prim("\"SG_analysis_has_errors\"",[Var("a")]))),SDefNoArgs("nabl2--get-custom-analysis",Seq(Match(Var("a")),Prim("\"SG_get_custom_analysis\"",[Var("a")]))),SDefT("nabl2--set-custom-analysis",[],[DefaultVarDec("a")],Prim("\"SG_set_custom_analysis\"",[Var("a")]))]),Rules([SDefT("nabl2--get-all-decls",[],[DefaultVarDec("a")],Prim("\"SG_get_all_decls\"",[Var("a")])),SDefT("nabl2--get-all-refs",[],[DefaultVarDec("a")],Prim("\"SG_get_all_refs\"",[Var("a")])),SDefT("nabl2--get-all-scopes",[],[DefaultVarDec("a")],Prim("\"SG_get_all_scopes\"",[Var("a")])),SDefT("nabl2--get-decl-scope",[],[DefaultVarDec("a")],Prim("\"SG_get_decl_scope\"",[Var("a")])),SDefT("nabl2--get-ref-scope",[],[DefaultVarDec("a")],Prim("\"SG_get_ref_scope\"",[Var("a")])),SDefT("nabl2--get-scope-decls",[],[DefaultVarDec("a")],Prim("\"SG_get_scope_decls\"",[Var("a")])),SDefT("nabl2--get-scope-refs",[],[DefaultVarDec("a")],Prim("\"SG_get_scope_refs\"",[Var("a")])),SDefT("nabl2--get-direct-edges",[],[DefaultVarDec("a")],Prim("\"SG_get_direct_edges\"",[Var("a")])),SDefT("nabl2--get-direct-edges-inv",[],[DefaultVarDec("a")],Prim("\"SG_get_direct_edges_inv\"",[Var("a")])),SDefT("nabl2--get-export-edges",[],[DefaultVarDec("a")],Prim("\"SG_get_export_edges\"",[Var("a")])),SDefT("nabl2--get-export-edges-inv",[],[DefaultVarDec("a")],Prim("\"SG_get_export_edges_inv\"",[Var("a")])),SDefT("nabl2--get-import-edges",[],[DefaultVarDec("a")],Prim("\"SG_get_import_edges\"",[Var("a")])),SDefT("nabl2--get-import-edges-inv",[],[DefaultVarDec("a")],Prim("\"SG_get_import_edges_inv\"",[Var("a")])),SDefT("nabl2--get-visible-decls",[],[DefaultVarDec("a")],Prim("\"SG_get_visible_decls\"",[Var("a")])),SDefT("nabl2--get-reachable-decls",[],[DefaultVarDec("a")],Prim("\"SG_get_reachable_decls\"",[Var("a")]))]),Rules([SDefT("nabl2--get-symbolic-facts",[],[DefaultVarDec("a")],Prim("\"SG_get_symbolic_facts\"",[Var("a")])),SDefT("nabl2--get-symbolic-goals",[],[DefaultVarDec("a")],Prim("\"SG_get_symbolic_goals\"",[Var("a")]))]),Rules([RDefNoArgs("nabl2--mk-occurrence",Rule(Var("t"),NoAnnoList(Op("Occurrence",[NoAnnoList(Op("DefaultNamespace",[])),Var("t"),Var("index")])),Assign(Var("index"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("t"))))),RDefT("nabl2--mk-occurrence",[],[DefaultVarDec("ns")],Rule(Var("t"),NoAnnoList(Op("Occurrence",[Var("ns'"),Var("t"),Var("index")])),Seq(Assign(Var("ns'"),App(CallNoArgs(SVar("nabl2--mk-namespace")),Var("ns"))),Assign(Var("index"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("t")))))),RDefT("nabl2--mk-occurrence",[],[DefaultVarDec("ns"),DefaultVarDec("ot")],Rule(Var("t"),NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[Var("ns")])),Var("t"),Var("index")])),Seq(Assign(Var("ns'"),App(CallNoArgs(SVar("nabl2--mk-namespace")),Var("ns"))),Assign(Var("index"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("ot")))))),RDefNoArgs("nabl2--occurrence-name",Rule(NoAnnoList(Op("Occurrence",[Wld,Var("name"),Var("index")])),Var("name'"),[WithClause(Assign(Var("name'"),App(Call(SVar("try"),[CallT(SVar("nabl2--copy-origin"),[],[Var("index")])]),Var("name"))))])),RDefNoArgs("nabl2--occurrence-ns",Rule(NoAnnoList(Op("Occurrence",[Var("ns"),Wld,Var("index")])),Var("ns'"),[WithClause(Assign(Var("ns'"),App(Seq(CallNoArgs(SVar("nabl2--namespace-name")),Call(SVar("try"),[CallT(SVar("nabl2--copy-origin"),[],[Var("index")])])),Var("ns"))))])),RDefNoArgs("nabl2--occurrence-index",RuleNoCond(NoAnnoList(Op("Occurrence",[Wld,Wld,Var("index")])),Var("index"))),SDefNoArgs("nabl2--get-path-scopes",Call(SVar("filter"),[Choice(Match(NoAnnoList(Op("E",[RootApp(Id),Wld]))),Choice(Match(NoAnnoList(Op("N",[RootApp(Id),Wld,Wld,Wld]))),Match(NoAnnoList(Op("D",[RootApp(Id),Wld])))))])),RDefNoArgs("nabl2--mk-namespace",RuleNoCond(NoAnnoList(Str("\"\"")),NoAnnoList(Op("DefaultNamespace",[])))),RDefNoArgs("nabl2--mk-namespace",RuleNoCond(Var("ns"),NoAnnoList(Op("Namespace",[Var("ns")])))),RDefNoArgs("nabl2--namespace-name",RuleNoCond(NoAnnoList(Op("DefaultNamespace",[])),NoAnnoList(Str("\"\"")))),RDefNoArgs("nabl2--namespace-name",RuleNoCond(NoAnnoList(Op("Namespace",[Var("ns")])),Var("ns"))),SDefNoArgs("nabl2--strip-occurrence-index",Call(SVar("Occurrence"),[Id,Id,Build(NoAnnoList(Op("NoIndex",[])))]))]),Rules([SDefNoArgs("nabl2--message-pos",GuardedLChoice(Match(NoAnnoList(Op("Message",[Wld,Wld,Var("pos")]))),Build(Var("pos")),Id))])])