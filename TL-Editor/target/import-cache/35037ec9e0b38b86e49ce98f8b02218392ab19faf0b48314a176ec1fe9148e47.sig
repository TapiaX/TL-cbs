Module("nabl2/runtime/interpreter/util",[Imports([Import("nabl2/runtime/interpreter/scopegraph-api")]),Signatures([Arrows([MetaFunDecl(NoArrowROs,"filterOccsByNamespace",[ListSort(SimpleSort("Occurrence")),SimpleSort("Namespace")],NoArrowRWs,ListSort(SimpleSort("Occurrence")),NoArrowRWs),MetaFunDecl(NoArrowROs,"filterOccsByName",[ListSort(SimpleSort("Occurrence")),SimpleSort("Name")],NoArrowRWs,ListSort(SimpleSort("Occurrence")),NoArrowRWs),MetaFunDecl(NoArrowROs,"declOfPath",[ListSort(SimpleSort("Step"))],NoArrowRWs,SimpleSort("Occurrence"),NoArrowRWs),MetaFunDecl(NoArrowROs,"importedOf",[SimpleSort("Scope"),SimpleSort("Label")],NoArrowRWs,ListSort(SimpleSort("Occurrence")),NoArrowRWs),MetaFunDecl(NoArrowROs,"edgesOf",[SimpleSort("Scope"),SimpleSort("Label")],NoArrowRWs,ListSort(SimpleSort("Scope")),NoArrowRWs),MetaFunDecl(ArrowROs([Label("NaBL2")]),"declsOf",[SimpleSort("Scope"),SimpleSort("Namespace")],NoArrowRWs,ListSort(SimpleSort("Occurrence")),NoArrowRWs),MetaFunDecl(ArrowROs([Label("NaBL2")]),"declOfRef",[SimpleSort("Occurrence")],NoArrowRWs,SimpleSort("Occurrence"),NoArrowRWs),MetaFunDecl(ArrowROs([Label("NaBL2")]),"assocScopeOf",[SimpleSort("Occurrence"),SimpleSort("Label")],NoArrowRWs,SimpleSort("Scope"),NoArrowRWs)])]),Rules([Axiom(Relation(NoReads,Source(Con("filterOccsByNamespace",[List_([]),Wld])),Dynamic,Target(List_([])))),RuleW(Relation(NoReads,Source(Con("filterOccsByNamespace",[ListTail([VarRef("o")],VarRef("os")),VarRef("ns")])),Dynamic,Target(ListTail([VarRef("o")],VarRef("os'")))),[Formula(Relation(NoReads,Source(Con("namespaceOf",[VarRef("o")])),Dynamic,Target(VarRef("ns'")))),Formula(TermEq(VarRef("ns"),VarRef("ns'"))),Formula(Relation(NoReads,Source(Con("filterOccsByNamespace",[VarRef("os"),VarRef("ns")])),Dynamic,Target(VarRef("os'"))))]),RuleW(Relation(NoReads,Source(Con("filterOccsByNamespace",[ListTail([VarRef("o")],VarRef("os")),VarRef("ns")])),Dynamic,Target(Con("filterOccsByNamespace",[VarRef("os"),VarRef("ns")]))),[Formula(Relation(NoReads,Source(Con("namespaceOf",[VarRef("o")])),Dynamic,Target(VarRef("ns'")))),Formula(TermNeq(VarRef("ns"),VarRef("ns'")))]),Axiom(Relation(NoReads,Source(Con("filterOccsByName",[List_([]),Wld])),Dynamic,Target(List_([])))),RuleW(Relation(NoReads,Source(Con("filterOccsByName",[ListTail([VarRef("o")],VarRef("os")),VarRef("n")])),Dynamic,Target(ListTail([VarRef("o")],VarRef("os'")))),[Formula(Relation(NoReads,Source(Con("nameOf",[VarRef("o")])),Dynamic,Target(VarRef("n'")))),Formula(TermEq(VarRef("n'"),VarRef("n"))),Formula(Relation(NoReads,Source(Con("filterOccsByName",[VarRef("os"),VarRef("n")])),Dynamic,Target(VarRef("os'"))))]),RuleW(Relation(NoReads,Source(Con("filterOccsByName",[ListTail([VarRef("o")],VarRef("os")),VarRef("n")])),Dynamic,Target(Con("filterOccsByName",[VarRef("os"),VarRef("n")]))),[Formula(Relation(NoReads,Source(Con("nameOf",[VarRef("o")])),Dynamic,Target(VarRef("n'")))),Formula(TermNeq(VarRef("n'"),VarRef("n")))])]),Rules([RuleW(Relation(NoReads,Source(Con("declOfRef",[Cast(VarRef("o"),SimpleSort("Occurrence"))])),Dynamic,Target(Con("declOfPath",[VarRef("p")]))),[Formula(Relation(NoReads,Source(Con("pathOf",[VarRef("o")])),Dynamic,Target(VarRef("p"))))])]),Rules([RuleW(Relation(NoReads,Source(Con("declOfPath",[ListTail([VarRef("p")],VarRef("ps"))])),Dynamic,Target(VarRef("o"))),[CaseMatch(VarRef("p"),[CasePattern(Con("D",[Wld,VarRef("o")]),[]),CaseOtherwise([Formula(Relation(NoReads,Source(Con("declOfPath",[VarRef("ps")])),Dynamic,Target(VarRef("o"))))])])])]),Rules([Axiom(Relation(NoReads,Source(Con("declsOf",[VarRef("s"),VarRef("ns")])),Dynamic,Target(Con("filterOccsByNamespace",[Con("declsOf",[VarRef("s")]),VarRef("ns")])))),RuleW(Relation(NoReads,Source(Con("assocScopeOf",[VarRef("d"),VarRef("l")])),Dynamic,Target(VarRef("s"))),[Formula(Relation(NoReads,Source(Con("assocsOf",[VarRef("d")])),Dynamic,Target(VarRef("assocs")))),Formula(Match(DeAssoc(VarRef("assocs"),VarRef("l")),List_([VarRef("s")])))]),RuleW(Relation(NoReads,Source(Con("importedOf",[VarRef("s"),VarRef("l")])),Dynamic,Target(VarRef("os"))),[Formula(Relation(NoReads,Source(Con("importsOf",[VarRef("s")])),Dynamic,Target(VarRef("import-edges")))),CaseMatch(MapHas(VarRef("import-edges"),VarRef("l")),[CasePattern(False,[Formula(Match(Cast(List_([]),ListSort(SimpleSort("Occurrence"))),VarRef("os")))]),CasePattern(True,[Formula(Match(DeAssoc(VarRef("import-edges"),VarRef("l")),VarRef("os")))])])]),RuleW(Relation(NoReads,Source(Con("edgesOf",[VarRef("s"),VarRef("l")])),Dynamic,Target(DeAssoc(VarRef("edges"),VarRef("l")))),[Formula(Relation(NoReads,Source(Con("edgesOf",[VarRef("s")])),Dynamic,Target(VarRef("edges"))))])])])